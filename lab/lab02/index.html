<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS88: Computational Structures in Data Science " />
    <meta name="keywords" content ="CS88, Computer Science, Data Science, Programming, David Culler, Berkeley, EECS" />
    <meta name="author" content ="David Culler, Garrett Tan, Gunjan Baid, Richard Liang, Nishant Desai" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
    <link rel="icon" href="/assets/images/favicon.ico">

    <link rel="stylesheet" href="/assets/css/mono-blue.css">
    <script src="/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <link rel="stylesheet" type="text/css" href="/assets/css/resource.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/lab.css" />


    <title>Lab 2: Higher-Order Functions | CS 88 Spring 2016</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">CS 88</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/">Calendar</a></li>
            <li><a href="/articles/resources.html">Resources</a></li>
            <li><a href="/office-hours.html">Office Hours</a></li>
            <!--- <li><a href="/tutoring.html">Tutoring</a></li> -->

            <li><a href="/articles/using-ok.html">Using OK</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Course Info <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/articles/about.html">Syllabus</a></li>
                <li><a href="/staff.html">Staff</a></li>
                <!-- <li><a href="/weekly.html">Weekly Schedule</a></li> -->
                <!-- <li><a href="/extra.html">Extra Lectures</a></li> -->
              </ul>
            </li>

          </ul>
        </div>
      </div>
    </nav>

    <div id="content" class="container">
      <div class='row'>
  <div class='col-md-9'>
    <div class='page-header'>
      <h1><span class="content-title-brand">Lab 2</span>: Higher-Order Functions</h1>
    </div>

    <p><i>Due at 11:59pm on 02/12/2016.</i></p>

<h2 id='starter-files'>Starter Files</h2>

<p>Download <a href="lab02.zip">lab02.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the <a href="ok">OK</a> autograder.</p>

<h2 id='submission'>Submission</h2>

<p>By the end of this lab, you should have submitted the lab with
<code>python3 ok --submit</code>. You may submit more than once before the
deadline; only the final submission will be graded.</p>


<ul>
  <li>Questions 1-3 are designed to review concepts and test understandings.</li>
  <li>Question 4-10 are in <a href="lab02.py">lab02.py</a>.  Submit using OK.</li>
  <li>Questions 11-16 are <a href="lab02_extra.py">lab02_extra.py</a>.  It is recommended that
  you complete these problems on your own time</li>
  <li>You may want to scan ahead and start downloading anaconda early in the lab
  so you can create a virtual environment in the background while you are doing
  the lab.  This will let us do development using Tables.</li>
</ul>


    


<h2 id="more-experience-with-functions">More experience with functions</h2>


<h3 class="question" id="q1">Question 1: Environment diagrams</h3>

<p>If you haven't found this gem already,
<a href="http://pythontutor.com/composingprograms.html">pythontutor.com</a>
has a great visualization tool for environment diagrams. Paste in your
Python code and it will generate an environment diagram you can walk
through step-by-step! Use it to help you check your answers!</p>

<p>Try drawing environment diagrams for the following examples and
predicting what Python will output:</p>


    <pre><code>&gt;&gt;&gt; def square(x):
...     return x * x
&gt;&gt;&gt; def double(x):
...     return x + x
&gt;&gt;&gt; a = square(double(4))
&gt;&gt;&gt; a
<div class="alt 20">______</div><div class="solution 20">&#x36;&#x34;</div></code></pre>

    <button id='20' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    


    <pre><code>&gt;&gt;&gt; x, y = 4, 3
&gt;&gt;&gt; def reassign(arg1, arg2):
...     x = arg1
...     y = arg2
&gt;&gt;&gt; reassign(5, 6)
&gt;&gt;&gt; x
<div class="alt 21">______</div><div class="solution 21">&#x34;</div>
&gt;&gt;&gt; y
<div class="alt 21">______</div><div class="solution 21">&#x33;</div></code></pre>

    <button id='21' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    


    <pre><code>&gt;&gt;&gt; def f(x):
...     f(x)
&gt;&gt;&gt; print, f = f, print
&gt;&gt;&gt; a = f(4)
<div class="alt 22">______</div><div class="solution 22">&#x34;</div>
&gt;&gt;&gt; a
<div class="alt 22">______</div><div class="solution 22">&#x23;&#x20;&#x4e;&#x6f;&#x74;&#x68;&#x69;&#x6e;&#x67;&#x20;&#x73;&#x68;&#x6f;&#x77;&#x73;&#x20;&#x75;&#x70;&#x2c;&#x20;&#x62;&#x65;&#x63;&#x61;&#x75;&#x73;&#x65;&#x20;&#x61;&#x20;&#x3d;&#x20;&#x4e;&#x6f;&#x6e;&#x65;</div>
&gt;&gt;&gt; b = print(4)
<div class="alt 22">______</div><div class="solution 22">&#x34;</div>
&gt;&gt;&gt; b
<div class="alt 22">______</div><div class="solution 22">&#x23;&#x20;&#x4e;&#x6f;&#x74;&#x68;&#x69;&#x6e;&#x67;&#x20;&#x73;&#x68;&#x6f;&#x77;&#x73;&#x20;&#x75;&#x70;&#x2c;&#x20;&#x62;&#x65;&#x63;&#x61;&#x75;&#x73;&#x65;&#x20;&#x62;&#x20;&#x3d;&#x20;&#x4e;&#x6f;&#x6e;&#x65;</div></code></pre>

    <button id='22' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Several doctests or questions refer to these simple one-argument functions:</p>

<pre><code>def identity(x):
    return x

def four(x):
    return 4

def increment(x):
    return x + 1

def triple(x):
    return 3 * x

def square(x):
    return x * x

def sqrt(x):
    return x**(1/2)</code></pre>

<h3 class="question" id="q2">Question 2: Local and Global Scope - area examples</h3>

<p>Using the function provided <code>area_rectangle(length, width)</code> implement the one line
function <code>area_square(length)</code> where <code>length</code> is the length of the sides.</p>



<pre><code>def area_rectangle(length, width):
    return length*width

def area_square(length):
    &quot;&quot;&quot;
    &gt;&gt;&gt; area_square(2)
    4
    &quot;&quot;&quot;
<div class="alt 1">    "*** YOUR CODE HERE ***"
</div><div class="solution 1">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x61;&#x72;&#x65;&#x61;&#x5f;&#x72;&#x65;&#x63;&#x74;&#x61;&#x6e;&#x67;&#x6c;&#x65;&#x28;&#x6c;&#x65;&#x6e;&#x67;&#x74;&#x68;&#x2c;&#x6c;&#x65;&#x6e;&#x67;&#x74;&#x68;&#x29;</div></code></pre>


    <button id='1' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q area_square</code></pre>

<p>In the following, what variables have global scope and what variables
have local scope?  What is it local to?</p>

<pre><code> pi = 3.141592653589793

 def area_circle(radius):
     area = pi*square(radius)
     return area</code></pre>

<p>What value would be returned from the second call to <code>area_circle</code>?</p>

<pre><code>&gt;&gt;&gt; pi
3.141592653589793
&gt;&gt;&gt; area_circle(3)
28.274333882308138
&gt;&gt;&gt; pi = 3</code></pre>


    <pre><code>&gt;&gt;&gt; area_circle(3)
<div class="alt 23">______</div><div class="solution 23">&#x32;&#x37;</div>
&gt;&gt;&gt;</code></pre>

    <button id='23' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>The body of a function consists of a collection of statements.  These may include
assignment statements, if statements, and loop statements, as well as return statements.
Complete the <code>area_triangle</code> function using
<a href="https://en.wikipedia.org/wiki/Heron%27s_formula">Heron's formula</a>.</p>



<pre><code> def perimeter_triangle(a,b,c):
     return a+b+c

 def area_triangle(a, b, c):
     &quot;&quot;&quot;Return the area of a triangle of sides of length as a,b,c.

     &gt;&gt;&gt; area_triangle(3,4,5)
     6.0
     &quot;&quot;&quot;
     s = perimeter_triangle(a,b,c)/2
<div class="alt 2">     "*** YOUR CODE HERE ***"
</div><div class="solution 2">&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x73;&#x71;&#x72;&#x74;&#x28;&#x73;&#x2a;&#x28;&#x73;&#x2d;&#x61;&#x29;&#x2a;&#x28;&#x73;&#x2d;&#x62;&#x29;&#x2a;&#x28;&#x73;&#x2d;&#x63;&#x29;&#x29;</div></code></pre>


    <button id='2' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q area_triangle</code></pre>

<h3 class="question" id="q3">Question 3: Tuples as function arguments</h3>

<p>These area functions all have different "signatures"; some take one parameter, others
two or three.  As we deal with higher order functions, and in other settings, it
is often convenient to take a single parameter that is a <code>tuple</code> of one more
values.  Here's some examples to give you some experience with that.</p>



<pre><code> def uarea_rectangle(descriptor):
     &quot;&quot;&quot;
     &gt;&gt;&gt; uarea_rectangle((3,4))
     12
     &quot;&quot;&quot;
<div class="alt 3">     "*** YOUR CODE HERE ***"
</div><div class="solution 3">&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x65;&#x6e;&#x67;&#x74;&#x68;&#x2c;&#x20;&#x77;&#x69;&#x64;&#x74;&#x68;&#x20;&#x3d;&#x20;&#x64;&#x65;&#x73;&#x63;&#x72;&#x69;&#x70;&#x74;&#x6f;&#x72;</div>     return area_rectangle(length,width)

 def uarea_square(descriptor):
     &quot;&quot;&quot;
     &gt;&gt;&gt; uarea_square(3)
     9
     &quot;&quot;&quot;
     length = descriptor
     return area_square(length)

 def uarea_circle(descriptor):
     &quot;&quot;&quot;
     &gt;&gt;&gt; uarea_circle(3)
     28.274333882308138
     &quot;&quot;&quot;
     return area_circle(descriptor)

 def uarea_triangle(descriptor):
     &quot;&quot;&quot;Return the area of a triangle of sides described as (a,b,c).

     &gt;&gt;&gt; uarea_triangle((3,4,5))
     6.0
     &quot;&quot;&quot;
<div class="alt 3">     "*** YOUR CODE HERE ***"
</div><div class="solution 3">&#x20;&#x20;&#x20;&#x20;&#x20;&#x61;&#x2c;&#x62;&#x2c;&#x63;&#x20;&#x3d;&#x20;&#x64;&#x65;&#x73;&#x63;&#x72;&#x69;&#x70;&#x74;&#x6f;&#x72;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x61;&#x72;&#x65;&#x61;&#x5f;&#x74;&#x72;&#x69;&#x61;&#x6e;&#x67;&#x6c;&#x65;&#x28;&#x61;&#x2c;&#x62;&#x2c;&#x63;&#x29;</div></code></pre>


    <button id='3' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q uarea_rectangle
python3 ok -q uarea_triangle</code></pre>


<h2 id="functions-as-values-and-arguments">Functions as values and arguments</h2>


<p>So far we have used several type of data - ints, floats, booleans,
strings, lists, tuples, and numpy.arrays.  We perform operations on them in
constructing expressions; we assign them to variables; we pass them to functions
and return them as results.  So what about functions themselves?  So far we have 
<em>called them</em>, that is we applied them to arguments.  Sometimes we <em>compose</em> them -
just like in math; apply a function to the result of applying a function.  You
did that several times above.</p>

<p>In modern programming languages like Python, functions are <em>first class citizens</em>;
we can pass them around and put them in data structures.  Take a look at the following
and try it out for various functions that you have available in the <code>.py</code> file for this
lab.</p>

<pre><code>&gt;&gt;&gt; square(square(3))
81
&gt;&gt;&gt; square
&lt;function square at 0x102033d90&gt;
&gt;&gt;&gt; x = square
&gt;&gt;&gt; x(3)
9
&gt;&gt;&gt; x(x(2))
16
&gt;&gt;&gt; </code></pre>

<h3 class="question" id="q4">Question 4: What would Python print?</h3>


    <pre><code>&gt;&gt;&gt; def square(x):
...     return x * x
...
&gt;&gt;&gt; def neg(f, x):
...     return &#x2d;f(x)
...
&gt;&gt;&gt; neg(square, 4)
<div class="alt 24">______</div><div class="solution 24">&#x2d;&#x31;&#x36;</div></code></pre>

    <button id='24' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q square
python3 ok -q -u</code></pre>

<h3 class="question" id="q5">Question 5: Composing Function Arguments</h3>



<pre><code>def twice(f,x):
    &quot;&quot;&quot;Apply f to the result of applying f to x&quot;
    &gt;&gt;&gt; twice(square,3)
    81
    &quot;&quot;&quot;
<div class="alt 4">    "*** YOUR CODE HERE ***"
</div><div class="solution 4">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x66;&#x28;&#x66;&#x28;&#x78;&#x29;&#x29;</div></code></pre>


    <button id='4' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q twice</code></pre>



<pre><code>def apply_n(f, x, n):
    &quot;&quot;&quot;Apply function f to x n times.

    &gt;&gt;&gt; apply_n(increment, 2, 10)
    12
    &quot;&quot;&quot;
<div class="alt 5">    "*** YOUR CODE HERE ***"
</div><div class="solution 5">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x73;&#x20;&#x3d;&#x20;&#x78;&#xa;&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x69;&#x20;&#x69;&#x6e;&#x20;&#x72;&#x61;&#x6e;&#x67;&#x65;&#x28;&#x6e;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x73;&#x20;&#x3d;&#x20;&#x66;&#x28;&#x72;&#x65;&#x73;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x72;&#x65;&#x73;</div></code></pre>


    <button id='5' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q apply_n</code></pre>


<h2 id="mapping-functions-over-data">Mapping functions over data</h2>


<h3 class="question" id="q6">Question 6: Variants of map</h3>

<p>In data8 you saw examples of applying a function to every element in a column
of a table, for example to decode the <code>sex</code> number code into a useful string.
And in class you saw how to map a function over a sequence.  This
<code>map</code> pattern is pervasive in data science.  And it is useful in many other 
settings.  Let's get some experience in building your own variations on <code>map</code>
that take functions as arguments and apply them in interesting ways to sequences
of data.</p>

<p>In class you saw how to implement <code>map</code>.</p>

<pre><code>def map(f,s):
    return [f(x) for x in s]</code></pre>

<p>Now that you've got some interesting functions defined, map them over some data.
<br/>

<pre><code>&gt;&gt;&gt; map(uarea_square, [1, 2, 3])
[1, 4, 9]
&gt;&gt;&gt; map(uarea_circle, [1, 2, 3])
[3.141592653589793, 12.566370614359172, 28.274333882308138]
&gt;&gt;&gt; map(uarea_rectangle, [(1,1), (1, 2), (3, 5)])
[1, 2, 15]
&gt;&gt;&gt; map(uarea_triangle, [(1,1,sqrt(2)), (3,4,5), (1,1,1)])
[0.49999999999999983, 6.0, 0.4330127018922193]</code></pre></p>

<p>Complete the function <code>mapn</code> that applies a function <code>f</code> to all the values in the
sequence from 0 to <code>n&#x2d;1</code>.</p>



<pre><code>def mapn(f, n):
    &quot;&quot;&quot;Return the list resulting from applying function f to the seguence 0 to n&#x2d;1.

    &gt;&gt;&gt; mapn(square,4)
    [0, 1, 4, 9]
    &quot;&quot;&quot;
<div class="alt 6">    "*** YOUR CODE HERE ***"
</div><div class="solution 6">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x5b;&#x66;&#x28;&#x78;&#x29;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x78;&#x20;&#x69;&#x6e;&#x20;&#x72;&#x61;&#x6e;&#x67;&#x65;&#x28;&#x6e;&#x29;&#x5d;</div></code></pre>


    <button id='6' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q mapn</code></pre>

<p>Complete the function <code>maxfun</code> that takes two functions <code>f</code> and <code>g</code> and
returns the maximum of these for each of the values from <code>low</code> to <code>high&#x2d;1</code>.</p>



<pre><code>def maxfun(f, g, low, high):
    &quot;&quot;&quot;Return the list of the maximums of f and g applied to the low..high&#x2d;1.

    &gt;&gt;&gt; maxfun(four,square,&#x2d;4,4)
    [16, 9, 4, 4, 4, 4, 4, 9]
    &quot;&quot;&quot;
<div class="alt 7">    "*** YOUR CODE HERE ***"
</div><div class="solution 7">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x5b;&#x6d;&#x61;&#x78;&#x28;&#x66;&#x28;&#x69;&#x29;&#x2c;&#x67;&#x28;&#x69;&#x29;&#x29;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x69;&#x20;&#x69;&#x6e;&#x20;&#x72;&#x61;&#x6e;&#x67;&#x65;&#x28;&#x6c;&#x6f;&#x77;&#x2c;&#x20;&#x68;&#x69;&#x67;&#x68;&#x29;&#x5d;</div></code></pre>


    <button id='7' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q maxfun</code></pre>


<h2 id="reducing-data-using-aggregation-functions">Reducing data using aggregation functions</h2>


<h3 class="question" id="q7">Question 7: Using aggregation function</h3>

<p>Write the higher order function <code>reduce</code> which takes</p>

<ul>
  <li>reducer - a two-argument function that reduces elements to a single value</li>
  <li>s - a sequence of values</li>
  <li>base - the starting value in the reduction.  This is usually the identity of the reducer</li>
</ul>



<pre><code>def reduce(reducer, s, base):
    &quot;&quot;&quot;Reduce a sequence under a two&#x2d;argument function starting from a base value.

    &gt;&gt;&gt; reduce(add, [1,2,3,4], 0)
    10
    &gt;&gt;&gt; reduce(mul, [1,2,3,4], 0)
    0
    &gt;&gt;&gt; reduce(mul, [1,2,3,4], 1)
    24
    &quot;&quot;&quot;
<div class="alt 8">    "*** YOUR CODE HERE ***"
</div><div class="solution 8">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;&#x20;&#x3d;&#x20;&#x62;&#x61;&#x73;&#x65;&#xa;&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x78;&#x20;&#x69;&#x6e;&#x20;&#x73;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;&#x20;&#x3d;&#x20;&#x72;&#x65;&#x64;&#x75;&#x63;&#x65;&#x72;&#x28;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;&#x2c;&#x20;&#x78;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;</div></code></pre>


    <button id='8' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q reduce</code></pre>

<p>Now you can put this to work to have a full map-reduce pattern.  For example:</p>

<pre><code>&gt;&gt;&gt; reduce(add, map(uarea_rectangle, [(1,1), (1, 2), (3, 5)]), 0)
18
&gt;&gt;&gt;</code></pre>

<p>Try out some more.</p>

<h3 class="question" id="q8">Question 8: Accumulate</h3>

<p>Putting some of these ideas together, we could write
a general function, called <code>accumulate</code>, with the following signature:</p>

<p><code>accumulate(combiner, base, n, term)</code> takes the following arguments:</p>

<ul>
  <li><code>term</code> is a function applied to 1 through <code>n</code>, inclusively</li>
  <li><code>combiner</code>: a two-argument function that specifies how the current term is
  combined with the previously accumulated terms.</li>
  <li><code>base</code>: value that specifies what value to use to start the accumulation.</li>
</ul>

<p>For example, <code>accumulate(add, 11, 3, square)</code> is</p>

<pre><code>11 + square(1) + square(2) + square(3)</code></pre>

<p>Implement <code>accumulate</code> and show how <code>summation</code> and <code>product</code> can both be
defined as simple calls to <code>accumulate</code>:</p>



<pre><code>from operator import add, mul

def accumulate(combiner, base, n, term):
    &quot;&quot;&quot;Return the result of combining the first n terms in a sequence.

    &gt;&gt;&gt; accumulate(add, 0, 5, identity)  # 0 + 1 + 2 + 3 + 4 + 5
    15
    &gt;&gt;&gt; accumulate(add, 11, 5, identity) # 11 + 1 + 2 + 3 + 4 + 5
    26
    &gt;&gt;&gt; accumulate(add, 11, 0, identity) # 11
    11
    &gt;&gt;&gt; accumulate(add, 11, 3, square)   # 11 + 1^2 + 2^2 + 3^2
    25
    &gt;&gt;&gt; accumulate(mul, 2, 3, square)   # 2 * 1^2 * 2^2 * 3^2
    72
    &quot;&quot;&quot;
<div class="alt 9">    "*** YOUR CODE HERE ***"
</div><div class="solution 9">&#x20;&#x20;&#x20;&#x20;&#x74;&#x6f;&#x74;&#x61;&#x6c;&#x2c;&#x20;&#x6b;&#x20;&#x3d;&#x20;&#x62;&#x61;&#x73;&#x65;&#x2c;&#x20;&#x31;&#xa;&#x20;&#x20;&#x20;&#x20;&#x77;&#x68;&#x69;&#x6c;&#x65;&#x20;&#x6b;&#x20;&#x3c;&#x3d;&#x20;&#x6e;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x74;&#x6f;&#x74;&#x61;&#x6c;&#x2c;&#x20;&#x6b;&#x20;&#x3d;&#x20;&#x63;&#x6f;&#x6d;&#x62;&#x69;&#x6e;&#x65;&#x72;&#x28;&#x74;&#x65;&#x72;&#x6d;&#x28;&#x6b;&#x29;&#x2c;&#x20;&#x74;&#x6f;&#x74;&#x61;&#x6c;&#x29;&#x2c;&#x20;&#x6b;&#x20;&#x2b;&#x20;&#x31;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x74;&#x6f;&#x74;&#x61;&#x6c;</div></code></pre>

<solution>

<solution>

<pre><code>def summation_using_accumulate(n, term):
    &quot;&quot;&quot;An implementation of summation using accumulate.

    &gt;&gt;&gt; summation_using_accumulate(5, square)
    55
    &gt;&gt;&gt; summation_using_accumulate(5, triple)
    45
    &quot;&quot;&quot;
<div class="alt 9">    "*** YOUR CODE HERE ***"
</div><div class="solution 9">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x61;&#x63;&#x63;&#x75;&#x6d;&#x75;&#x6c;&#x61;&#x74;&#x65;&#x28;&#x61;&#x64;&#x64;&#x2c;&#x20;&#x30;&#x2c;&#x20;&#x6e;&#x2c;&#x20;&#x74;&#x65;&#x72;&#x6d;&#x29;</div>
def product_using_accumulate(n, term):
    &quot;&quot;&quot;An implementation of product using accumulate.

    &gt;&gt;&gt; product_using_accumulate(4, square)
    576
    &gt;&gt;&gt; product_using_accumulate(6, triple)
    524880
    &quot;&quot;&quot;
<div class="alt 9">    "*** YOUR CODE HERE ***"
</div><div class="solution 9">&#x20;&#x20;&#x20;&#x20;&#x66;&#x72;&#x6f;&#x6d;&#x20;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x74;&#x6f;&#x72;&#x20;&#x69;&#x6d;&#x70;&#x6f;&#x72;&#x74;&#x20;&#x6d;&#x75;&#x6c;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x61;&#x63;&#x63;&#x75;&#x6d;&#x75;&#x6c;&#x61;&#x74;&#x65;&#x28;&#x6d;&#x75;&#x6c;&#x2c;&#x20;&#x31;&#x2c;&#x20;&#x6e;&#x2c;&#x20;&#x74;&#x65;&#x72;&#x6d;&#x29;</div></code></pre>


    <button id='9' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q accumulate
python3 ok -q summation_using_accumulate
python3 ok -q product_using_accumulate</code></pre>


<h2 id="higher-order-functions">Higher Order Functions</h2>


<p>A higher order function is a function that manipulates other functions by taking
in functions as arguments, returning a function, or both. We will be exploring
many applications of higher order functions.</p>

<h3 class="question" id="q9">Question 9: Dispatch and Higher Order Functions</h3>

<p>They say "all problems in Computer Science can be solved by a level of indirection".  We'll
talk more about what that all means, but one of the best examples is the ability to
translate a key into a value by looking it up in a table.  We saw a form of such a translation
when we convert <code>0 =&gt; &quot;all&quot;, 1 =&gt; &quot;male&quot;, 2 =&gt; &quot;female&quot;</code> in the census table.
<br/>

Implement the function <code>lookup</code> which takes a <code>key</code> and <code>table</code> consisting of a list of
<code>(key, value)</code> tuples.  It should go down the list to determine if the <code>key</code> of an entry
matches the desired <code>key</code>.  If so, it returns the associated <code>value</code>.  The docstring
provides some examples, but you may want to create your own.  This function is amazingly
useful.</p>

<p>Just as one example, here is how you might use it to build the gender decoder that you
previously built with an if-then-else structure.  It is very flexible.  If a fourth
code was introduced, simply add and entry to the table.  You don't have to change the code
at all.</p>

<pre><code>gender_table = ((0, &quot;all&quot;),
                (1, &quot;male&quot;),
                (2, &quot;female&quot;))

def int_to_gender(i):
    return lookup(i, gender_table)</code></pre>



<pre><code>def lookup(key, table):
    &quot;&quot;&quot;Return the val associated with the key in a table.                                     

    &gt;&gt;&gt; lookup(&#x27;grape&#x27;, [(&#x27;apple&#x27;, 1.29),(&#x27;grape&#x27;, 2.49),(&#x27;orange&#x27;, 1.79)])                   
    2.49                                                                                      
    &gt;&gt;&gt; lookup(&#x27;banana&#x27;, [(&#x27;apple&#x27;, 1.29),(&#x27;grape&#x27;, 2.49),(&#x27;orange&#x27;, 1.79)])   
    &quot;&quot;&quot;
<div class="alt 10">    "*** YOUR CODE HERE ***"
</div><div class="solution 10">&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x65;&#x6e;&#x74;&#x72;&#x79;&#x5f;&#x6b;&#x65;&#x79;&#x2c;&#x20;&#x65;&#x6e;&#x74;&#x72;&#x79;&#x5f;&#x76;&#x61;&#x6c;&#x20;&#x20;&#x69;&#x6e;&#x20;&#x74;&#x61;&#x62;&#x6c;&#x65;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x28;&#x6b;&#x65;&#x79;&#x20;&#x3d;&#x3d;&#x20;&#x65;&#x6e;&#x74;&#x72;&#x79;&#x5f;&#x6b;&#x65;&#x79;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x65;&#x6e;&#x74;&#x72;&#x79;&#x5f;&#x76;&#x61;&#x6c;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x4e;&#x6f;&#x6e;&#x65;</div></code></pre>


    <button id='10' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>We would like to use this function my mapping it over sequence and all sorts of things.  But,
just like <code>divides</code> that we saw in class, we need to first make a new function out of it
by binding a particular table.  That function will just take a key and return the
associated value it finds in the table.</p>

<p>So here we go.  We need to make a little function factory.  <code>Translator_maker</code> takes
a <code>table</code> as input and constructs a new function that takes a single <code>key</code> argument, looks
this up in the table and returns the matching value.  Study it carefully.</p>

<pre><code>def translater_maker(table):
    def lookup_fun(key):
        return lookup(key, table)
    return lookup_fun

&gt;&gt;&gt; fruit_prices = [(&#x27;apple&#x27;, 1.29),(&#x27;grape&#x27;, 2.49),(&#x27;orange&#x27;, 1.79)]
&gt;&gt;&gt; fruit_price = translater_maker(fruit_prices)
&gt;&gt;&gt;
&gt;&gt;&gt; fruit_price
&lt;function translater_maker.&lt;locals&gt;.lookup_fun at 0x102110730&gt;
&gt;&gt;&gt; fruit_price(&#x27;apple&#x27;)
1.29
&gt;&gt;&gt; fruit_price(&#x27;banana&#x27;)
&gt;&gt;&gt; map(fruit_price, [&#x27;apple&#x27;, &#x27;apple&#x27;, &#x27;orange&#x27;, &#x27;grape&#x27;])
[1.29, 1.29, 1.79, 2.49]</code></pre>

<p>Each time <code>translater_maker</code> is called it manufactures a new function.</p>

<pre><code>&gt;&gt;&gt; translater_maker(fruit_prices)
&lt;function translater_maker.&lt;locals&gt;.lookup_fun at 0x10210e378&gt;
&gt;&gt;&gt; translater_maker(fruit_prices)
&lt;function translater_maker.&lt;locals&gt;.lookup_fun at 0x102110950&gt;
&gt;&gt;&gt; map(translater_maker(fruit_prices), [&#x27;apple&#x27;, &#x27;apple&#x27;, &#x27;orange&#x27;, &#x27;grape&#x27;])
[1.29, 1.29, 1.79, 2.49]</code></pre>

<p>Write an expression that manufactures a function that behaves identically with
<code>int_to_gender</code> using <code>translater_maker</code>.  Show that it can be mapped over
sequences of <code>SEX</code> values to produce a sequence of gender strings.</p>



<pre><code><div class="alt 11">"*** YOUR CODE HERE ***"
</div><div class="solution 11">&#x64;&#x65;&#x63;&#x6f;&#x64;&#x65;&#x5f;&#x67;&#x65;&#x6e;&#x64;&#x65;&#x72;&#x20;&#x3d;&#x20;&#x74;&#x72;&#x61;&#x6e;&#x73;&#x6c;&#x61;&#x74;&#x65;&#x72;&#x5f;&#x6d;&#x61;&#x6b;&#x65;&#x72;&#x28;&#x67;&#x65;&#x6e;&#x64;&#x65;&#x72;&#x5f;&#x74;&#x61;&#x62;&#x6c;&#x65;&#x29;&#xa;&#x3e;&#x3e;&#x3e;&#x20;&#x6d;&#x61;&#x70;&#x28;&#x64;&#x65;&#x63;&#x6f;&#x64;&#x65;&#x5f;&#x67;&#x65;&#x6e;&#x64;&#x65;&#x72;&#x2c;&#x20;&#x5b;&#x30;&#x2c;&#x32;&#x2c;&#x31;&#x2c;&#x31;&#x2c;&#x32;&#x5d;&#x29;&#xa;&#x5b;&#x27;&#x61;&#x6c;&#x6c;&#x27;&#x2c;&#x20;&#x27;&#x66;&#x65;&#x6d;&#x61;&#x6c;&#x65;&#x27;&#x2c;&#x20;&#x27;&#x6d;&#x61;&#x6c;&#x65;&#x27;&#x2c;&#x20;&#x27;&#x6d;&#x61;&#x6c;&#x65;&#x27;&#x2c;&#x20;&#x27;&#x66;&#x65;&#x6d;&#x61;&#x6c;&#x65;&#x27;&#x5d;&#xa;&#x3e;&#x3e;&#x3e;</div></code></pre>


    <button id='11' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>When <code>lookup</code> is used with higher-order functions it provides a <em>dispatch</em>
software design pattern.  Consider the following example.  We start up with a
table of <code>(key, function)</code> tuples.</p>

<pre><code>area_funs = [(&quot;square&quot;,    uarea_square),
             (&quot;rectangle&quot;, uarea_rectangle),
             (&quot;circle&quot;,    uarea_circle),
             (&quot;triangle&quot;,  uarea_triangle)
            ]</code></pre>

<p>This allows us to write a generic table-driven <code>area</code> function.</p>

<pre><code>def area(shape_type, descriptor):
    area_fun = lookup(shape_type, area_funs)
    return area_fun(descriptor)</code></pre>

<p>Here's an example of using this.
<br/>

<pre><code>shapes = [(&quot;square&quot;, 2),
          (&quot;rectangle&quot;, (3, 4)),
          (&quot;rectangle&quot;, (5, 4)),
          (&quot;circle&quot;, 1),
          (&quot;triangle&quot;, (1, 1, sqrt(2)))
         ]

def render_areas(shapes):
    for shape_type, shape_desc in shapes:
        print(&quot;{0}({1}) =&gt; {2}&quot;.format(shape_type, shape_desc, area(shape_type, shape_desc)))</code></pre></p>

<p>Try this out and convince yourself that it works and that you understand how it
works.</p>

<p>Now put these ideas together.  Complete the <code>area_maker</code> function so that it
returns a generic area function based on a table that it is provided.  You can
test it yourself on the larger set of <code>uarea</code> functions than is in the docstring  
<br/>

</p>

<pre><code>def area_maker(afuns):
    &quot;&quot;&quot;Return a function that computes area based on shape and descriptor built from
    a list of (shape function tuples).

    &gt;&gt;&gt; afun = area_maker([(&quot;square&quot;,uarea_square),(&quot;rectangle&quot;, uarea_rectangle)])
    &gt;&gt;&gt; afun(&quot;square&quot;,2)
    4
    &gt;&gt;&gt; afun(&quot;rectangle&quot;,(2,3))
    6

    &quot;&quot;&quot;
<div class="alt 12">    "*** YOUR CODE HERE ***"
</div><div class="solution 12">&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x66;&#x75;&#x6e;&#x28;&#x73;&#x68;&#x61;&#x70;&#x65;&#x5f;&#x74;&#x79;&#x70;&#x65;&#x2c;&#x20;&#x64;&#x65;&#x73;&#x63;&#x72;&#x69;&#x70;&#x74;&#x6f;&#x72;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x6c;&#x6f;&#x6f;&#x6b;&#x75;&#x70;&#x28;&#x73;&#x68;&#x61;&#x70;&#x65;&#x5f;&#x74;&#x79;&#x70;&#x65;&#x2c;&#x20;&#x61;&#x66;&#x75;&#x6e;&#x73;&#x29;&#x28;&#x64;&#x65;&#x73;&#x63;&#x72;&#x69;&#x70;&#x74;&#x6f;&#x72;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x66;&#x75;&#x6e;</div></code></pre>


    <button id='12' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<h3 class="question" id="q10">Question 10: WWPP: Higher Order Functions</h3>

<blockquote><p>Use OK to test your knowledge with the following "What Would Python Print?"
questions:</p>

<pre><code>python3 ok &#x2d;q hof &#x2d;u</code></pre>

<p>For WWPP questions, input <code>Function</code> if you believe the
answer is <code>&lt;function...&gt;</code>, <code>Error</code> if it errors, and <code>Nothing</code> if nothing
happens.</p></blockquote>


<h2 id="updating-your-work-environment-with-datascience-tools">Updating your work environment with datascience tools</h2>


<p>In c8 you are doing all your development in the cloud on data8.berkeley.edu, but all of
you appear to be using your personal computer for cs88.  If you are using the instructional
machine in the lab you can ignore this section. We would like to be able to use the
<code>datascience</code> module in cs88 as well, to make the most of what you learn in c8 and
vice versa.  You should start the download at the beginning of lab so it can run while
your TA is leading discussion and while you are doing your lab.  Come back to this at the
end to complete the setup.</p>


<h3 id="install-anaconda">Install anaconda</h3>


<p>Go to <a href="http://docs.continuum.io/anaconda/install">http://docs.continuum.io/anaconda/install</a>
and download Anacoda for PYTHON 3.5.  Follow the installation instructions.
<br/>

This builds the conda package manager on your computer.  You can use this to create virtual environments in which to do your work.  Once it is installed, create the cs88 environment.  In a terminal
window:</p>

<pre><code>conda create &#x2d;&#x2d;name cs88 python=3 scipy numpy matplotlib jupyter pandas</code></pre>

<p>Whenever you are working in this environment you will need to run in the terminal window</p>

<pre><code>source activate cs88</code></pre>

<p>Verify the python version is 3.4 or greater</p>

<pre><code>python &#x2d;&#x2d;version</code></pre>

<p>This first time, you will need to build the datascience tools in this environment.</p>

<pre><code>git clone https://github.com/dsten/datascience
cd datascience
source activate cs88
make install</code></pre>

<p>Once some bugs are fixed, this would all be replaced by</p>

<pre><code>pip install datascience</code></pre>

<p>At least this appears to be what works on a Mac.  We'll learn in lab of there are changes
needed for windows.</p>


<h2 id="coding-practice">Coding Practice</h2>


<blockquote><p>It's ok if you don't finish these questions during lab. However, we strongly
encourage you to try them out on your own time for extra practice.</p></blockquote>

<h3 class="question" id="q11">Question 11: The funny thing about global scope</h3>

<p>Try running the following code in Python:</p>

<pre><code>x, y = 42, 0
def swap(a, b):
    &quot;&quot;&quot;Reassigns variables x and y to b and a, respectively.&quot;&quot;&quot;
    x, y = b, a

swap(x, y)
result = x / y</code></pre>

<p>You should see an error occur on the last line:</p>

<pre><code>ZeroDivisionError: division by zero</code></pre>

<p>It seems like calling <code>swap(x, y)</code> didn't actually swap the variables! Why?</p>

<div class="solution 13">

<p>When <code>swap</code> is called, Python creates a new frame (let's call it <code>f1</code>). When
Python executes the line <code>x, y = b, a</code>, it sees that <code>f1</code> doesn't contain
variables called <code>x</code> and <code>y</code>, so it creates local variables <code>x</code> and <code>y</code> in
<code>f1</code>. It <strong>does not reassign</strong> variables in the global frame.</p>

</div>
    <button id='13' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>What happens if we change the definition of <code>swap</code> to</p>

<pre><code>def swap(a, b):
    a, b = b, a</code></pre>

<div class="solution 14">

<p>A <code>ZeroDivisionError</code> still occurs. Instead of creating two new local variables
<code>x</code> and <code>y</code> in <code>f1</code>, now Python just reassigns the local variables <code>a</code> and <code>b</code>.
The global variables <code>x</code> and <code>y</code> remain untouched.</p>

</div>
    <button id='14' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<h3 class="question" id="q12">Question 12: This Question is so Derivative</h3>

<p>Define a function <code>make_derivative</code> that returns a function: the derivative of a
function <code>f</code>. Assuming that <code>f</code> is a single-variable mathematical function, its
derivative will also be a single-variable function. When called with a number
<code>a</code>, the derivative will estimate the slope of <code>f</code> at point <code>(a, f(a))</code>.</p>

<p>Recall that the formula for finding the derivative of <code>f</code> at point <code>a</code> is:</p>

<p><img class="img-responsive center-block" src="assets/derivative.png" alt="Derivative"></p>

<p>where <code>h</code> approaches 0. We will approximate the derivative by choosing a very
small value for <code>h</code>. The closer <code>h</code> is to 0, the better the estimate of the
derivative will be.</p>



<pre><code>def make_derivative(f, h=1e&#x2d;5):
    &quot;&quot;&quot;Returns a function that approximates the derivative of f.

    Recall that f&#x27;(a) = (f(a + h) &#x2d; f(a)) / h as h approaches 0. We will
    approximate the derivative by choosing a very small value for h.

    &gt;&gt;&gt; square = lambda x: x*x
    &gt;&gt;&gt; derivative = make_derivative(square)
    &gt;&gt;&gt; result = derivative(3)
    &gt;&gt;&gt; round(result, 3) # approximately 2*3
    6.0
    &quot;&quot;&quot;
<div class="alt 15">    "*** YOUR CODE HERE ***"
</div><div class="solution 15">&#x20;&#x20;&#x20;&#x20;&#x64;&#x65;&#x66;&#x20;&#x64;&#x65;&#x72;&#x69;&#x76;&#x61;&#x74;&#x69;&#x76;&#x65;&#x28;&#x78;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x28;&#x66;&#x28;&#x78;&#x20;&#x2b;&#x20;&#x68;&#x29;&#x20;&#x2d;&#x20;&#x66;&#x28;&#x78;&#x29;&#x29;&#x20;&#x2f;&#x20;&#x68;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x64;&#x65;&#x72;&#x69;&#x76;&#x61;&#x74;&#x69;&#x76;&#x65;</div></code></pre>


    <button id='15' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q make_derivative</code></pre>

<h3 class="question" id="q13">Question 13: WWPP: Fun with nested functions</h3>

<blockquote><p>Use OK to test your knowledge with the following "What Would Python Print?"
questions:</p>

<pre><code>python3 ok &#x2d;q first &#x2d;u</code></pre></blockquote>


    <pre><code>&gt;&gt;&gt; def first(x):
...     x += 8
...     def second(y):
...         print(&#x27;second&#x27;)
...         return x + y
...     print(&#x27;first&#x27;)
...     return second
&gt;&gt;&gt; f = first(15)
<div class="alt 25">______</div><div class="solution 25">&#x66;&#x69;&#x72;&#x73;&#x74;</div>
&gt;&gt;&gt; f
<div class="alt 25">______</div><div class="solution 25">&#x3c;&#x66;&#x75;&#x6e;&#x63;&#x74;&#x69;&#x6f;&#x6e;&#x20;&#x2e;&#x2e;&#x2e;&#x3e;</div>
&gt;&gt;&gt; f(16)
<div class="alt 25">______</div><div class="solution 25">&#x73;&#x65;&#x63;&#x6f;&#x6e;&#x64;&#xa;&#x33;&#x39;</div></code></pre>

    <button id='25' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<h3 class="question" id="q14">Question 14: WWPP: More fun with nested functions!</h3>

<blockquote><p>Use OK to test your knowledge with the following "What Would Python Print?"
questions:</p>

<pre><code>python3 ok &#x2d;q foo &#x2d;u</code></pre></blockquote>


    <pre><code>&gt;&gt;&gt; def foo(x):
...     def bar(y):
...         return x + y
...     return bar
&gt;&gt;&gt; boom = foo(23)
&gt;&gt;&gt; boom(42)
<div class="alt 26">______</div><div class="solution 26">&#x36;&#x35;</div>
&gt;&gt;&gt; foo(6)(7)
<div class="alt 26">______</div><div class="solution 26">&#x31;&#x33;</div>
&gt;&gt;&gt; func = boom
&gt;&gt;&gt; # &quot;a is b&quot; returns whether a and b are different names for the same thing
&gt;&gt;&gt; func is boom
<div class="alt 26">______</div><div class="solution 26">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; func = foo(23)
&gt;&gt;&gt; func is boom
<div class="alt 26">______</div><div class="solution 26">&#x46;&#x61;&#x6c;&#x73;&#x65;</div></code></pre>

    <button id='26' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p><strong><em>Note</em></strong>: The following questions are in <a href="lab02_extra.py">lab02_extra.py</a>.</p>

<h3 class="question" id="q15">Question 15: More Practice with Loops and Conditionals</h3>

<p>Write a function <code>max_list</code> that takes in a list and returns its largest
element.</p>



<pre><code>def max_list(s):
    &quot;&quot;&quot;Return the largest value in a sequence.  None if empty.

    &gt;&gt;&gt; max_list([1,3,&#x2d;1])
    3
    &quot;&quot;&quot;
<div class="alt 16">    "*** YOUR CODE HERE ***"
</div><div class="solution 16">&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x6c;&#x65;&#x6e;&#x28;&#x73;&#x29;&#x20;&#x3d;&#x3d;&#x20;&#x30;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x4e;&#x6f;&#x6e;&#x65;&#xa;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x61;&#x72;&#x67;&#x65;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x66;&#x69;&#x72;&#x73;&#x74;&#x28;&#x73;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x76;&#x61;&#x6c;&#x20;&#x69;&#x6e;&#x20;&#x72;&#x65;&#x73;&#x74;&#x28;&#x73;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x76;&#x61;&#x6c;&#x20;&#x3e;&#x20;&#x6c;&#x61;&#x72;&#x67;&#x65;&#x73;&#x74;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x6c;&#x61;&#x72;&#x67;&#x65;&#x73;&#x74;&#x20;&#x3d;&#x20;&#x76;&#x61;&#x6c;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x6c;&#x61;&#x72;&#x67;&#x65;&#x73;&#x74;</div></code></pre>


    <button id='16' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Now write a function <code>remove_element</code> that takes in a list, <code>s</code>, and a value,
<code>exclude</code>. It should return a new list that contains all the elements in <code>s</code> that are
not equal to <code>exclude</code>.</p>



<pre><code>def remove_element(s, exclude):
    &quot;&quot;&quot;Remove all entries in sequence s equal to exclude.

    &gt;&gt;&gt; remove_element([1, 3, &#x2d;1], 1)
    [3, &#x2d;1]
    &quot;&quot;&quot;
<div class="alt 17">    "*** YOUR CODE HERE ***"
</div><div class="solution 17">&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;&#x20;&#x3d;&#x20;&#x5b;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x66;&#x6f;&#x72;&#x20;&#x76;&#x61;&#x6c;&#x20;&#x69;&#x6e;&#x20;&#x73;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x76;&#x61;&#x6c;&#x20;&#x21;&#x3d;&#x20;&#x65;&#x78;&#x63;&#x6c;&#x75;&#x64;&#x65;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;&#x20;&#x3d;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;&#x20;&#x2b;&#x20;&#x5b;&#x76;&#x61;&#x6c;&#x5d;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x72;&#x65;&#x73;&#x75;&#x6c;&#x74;</div></code></pre>


    <button id='17' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Using the last two functions, write a new function <code>remove_max</code> that takes in a list
and returns the same list with its maximal elements removed.</p>



<pre><code>def remove_max(s):
    &quot;&quot;&quot;Return a a list containing non&#x2d;maximal elements of a sequence.

    &gt;&gt;&gt; remove_max([1, 3, &#x2d;1, 3])
    [1, &#x2d;1]
    &quot;&quot;&quot;
<div class="alt 18">    "*** YOUR CODE HERE ***"
</div><div class="solution 18">&#x20;&#x20;&#x20;&#x20;&#x6d;&#x61;&#x78;&#x69;&#x6d;&#x75;&#x6d;&#x20;&#x3d;&#x20;&#x6d;&#x61;&#x78;&#x5f;&#x6c;&#x69;&#x73;&#x74;&#x28;&#x73;&#x29;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x72;&#x65;&#x6d;&#x6f;&#x76;&#x65;&#x5f;&#x65;&#x6c;&#x65;&#x6d;&#x65;&#x6e;&#x74;&#x28;&#x73;&#x2c;&#x20;&#x6d;&#x61;&#x78;&#x69;&#x6d;&#x75;&#x6d;&#x29;</div></code></pre>


    <button id='18' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q max_list
python3 ok -q remove_element
python3 ok -q remove_max</code></pre>

<h3 class="question" id="q16">Question 16: Count van Count</h3>

<p>Consider the following implementations of <code>count_factors</code> and <code>count_primes</code>:</p>

<pre><code>def count_factors(n):
    &quot;&quot;&quot;Return the number of positive factors that n has.&quot;&quot;&quot;
    i, count = 1, 0
    while i &lt;= n:
        if n % i == 0:
            count += 1
        i += 1
    return count

def count_primes(n):
    &quot;&quot;&quot;Return the number of prime numbers up to and including n.&quot;&quot;&quot;
    i, count = 1, 0
    while i &lt;= n:
        if is_prime(i):
            count += 1
        i += 1
    return count

def is_prime(n):
    return count_factors(n) == 2 # only factors are 1 and n</code></pre>

<p>The implementations look quite similar! Generalize this logic by writing a
function <code>count_cond</code>, which takes in a two-argument predicate function <code>condition(n,
i)</code>. <code>count_cond</code> returns a count of all the numbers from 1 to <code>n</code> that satisfy
<code>condition</code>.</p>

<p>Note: A predicate function is a function that returns a boolean (<code>True</code> or <code>False</code>).</p>



<pre><code>def count_cond(condition, n):
    &quot;&quot;&quot;
    &gt;&gt;&gt; divides = lambda n, i: n % i == 0
    &gt;&gt;&gt; count_cond(divides, 2) # 1, 2
    2
    &gt;&gt;&gt; count_cond(divides, 4) # 1, 2, 4
    3
    &gt;&gt;&gt; count_cond(divides, 12) # 1, 2, 3, 4, 6, 12
    6

    &gt;&gt;&gt; is_prime = lambda n, i: count_cond(divides, i) == 2
    &gt;&gt;&gt; count_cond(is_prime, 2) # 2
    1
    &gt;&gt;&gt; count_cond(is_prime, 3) # 2, 3
    2
    &gt;&gt;&gt; count_cond(is_prime, 4) # 2, 3
    2
    &gt;&gt;&gt; count_cond(is_prime, 5) # 2, 3, 5
    3
    &gt;&gt;&gt; count_cond(is_prime, 20) # 2, 3, 5, 7, 11, 13, 17, 19
    8
    &quot;&quot;&quot;
<div class="alt 19">    "*** YOUR CODE HERE ***"
</div><div class="solution 19">&#x20;&#x20;&#x20;&#x20;&#x69;&#x2c;&#x20;&#x63;&#x6f;&#x75;&#x6e;&#x74;&#x20;&#x3d;&#x20;&#x31;&#x2c;&#x20;&#x30;&#xa;&#x20;&#x20;&#x20;&#x20;&#x77;&#x68;&#x69;&#x6c;&#x65;&#x20;&#x69;&#x20;&#x3c;&#x3d;&#x20;&#x6e;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x66;&#x20;&#x63;&#x6f;&#x6e;&#x64;&#x69;&#x74;&#x69;&#x6f;&#x6e;&#x28;&#x6e;&#x2c;&#x20;&#x69;&#x29;&#x3a;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x63;&#x6f;&#x75;&#x6e;&#x74;&#x20;&#x2b;&#x3d;&#x20;&#x31;&#xa;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x20;&#x69;&#x20;&#x2b;&#x3d;&#x20;&#x31;&#xa;&#x20;&#x20;&#x20;&#x20;&#x72;&#x65;&#x74;&#x75;&#x72;&#x6e;&#x20;&#x63;&#x6f;&#x75;&#x6e;&#x74;</div></code></pre>


    <button id='19' class='toggleButton'>
    Toggle Solution<noscript> (enable JavaScript)</noscript>
    </button>
    

<p>Use OK to test your code:</p><pre><code>python3 ok -q count_cond</code></pre>


  </div>

  <div class='col-md-3'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#more-experience-with-functions">More experience with functions</a></li>
  <ul>
  <li><a href="#q1">Question 1: Environment diagrams</a></li>
  <li><a href="#q2">Question 2: Local and Global Scope - area examples</a></li>
  <li><a href="#q3">Question 3: Tuples as function arguments</a></li>
</ul>

  <li><a href="#functions-as-values-and-arguments">Functions as values and arguments</a></li>
  <ul>
  <li><a href="#q4">Question 4: What would Python print?</a></li>
  <li><a href="#q5">Question 5: Composing Function Arguments</a></li>
</ul>

  <li><a href="#mapping-functions-over-data">Mapping functions over data</a></li>
  <ul>
  <li><a href="#q6">Question 6: Variants of map</a></li>
</ul>

  <li><a href="#reducing-data-using-aggregation-functions">Reducing data using aggregation functions</a></li>
  <ul>
  <li><a href="#q7">Question 7: Using aggregation function</a></li>
  <li><a href="#q8">Question 8: Accumulate</a></li>
</ul>

  <li><a href="#higher-order-functions">Higher Order Functions</a></li>
  <ul>
  <li><a href="#q9">Question 9: Dispatch and Higher Order Functions</a></li>
  <li><a href="#q10">Question 10: WWPP: Higher Order Functions</a></li>
</ul>

  <li><a href="#updating-your-work-environment-with-datascience-tools">Updating your work environment with datascience tools</a></li>
  <ul>
  <li><a href="#install-anaconda">Install anaconda</a></li>
</ul>

  <li><a href="#coding-practice">Coding Practice</a></li>
  <ul>
  <li><a href="#q11">Question 11: The funny thing about global scope</a></li>
  <li><a href="#q12">Question 12: This Question is so Derivative</a></li>
  <li><a href="#q13">Question 13: WWPP: Fun with nested functions</a></li>
  <li><a href="#q14">Question 14: WWPP: More fun with nested functions!</a></li>
  <li><a href="#q15">Question 15: More Practice with Loops and Conditionals</a></li>
  <li><a href="#q16">Question 16: Count van Count</a></li>
</ul>

</ul>

    </nav>
  </div>

</div>
    </div>
  </body>
  <script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>
<script src="//code.jquery.com/jquery-latest.js"></script>
<script>
  $(function() {
    if (new Date("03/01/2016") < new Date()) {
      $('.toggleButton').css('display', 'inline-block');
      $('.toggleButton').click(function() {
        var solution_id = $(this).attr('id');
        $('div.' + solution_id).slideToggle(600);
      });
    }
    // Always display these toggle buttons
    $('.toggleButtonShow').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
  });
</script>
</html>
